




<div class="show-wrapper">

  <img class="show-img" src="<%= @picture.image_file %>" alt="">
</div>

<h2>Question:</h2>
<p> <%= @picture.body %> </p>



<% if logged_in? && current_user.id == @picture.user_id%>

<a href="/pictures/<%= @picture.id %>/edit">edit picture</a>

<% end %>

<% if logged_in? && current_user.id == @picture.user_id %>

  <form action="/pictures/<%= @picture.id %>" method="post">
    <input type="hidden" name="_method" value="delete">
    <button>delete</button>
  </form>

<% end %>

<h2>Answers</h2>


<% @comments.map do |comment| %>
  <p> <span class="comment-body">"<%= comment.body %>"</span> by <span class="comment-username"> "<%= comment.user.username %>"</span> Date Posted: <span class="comment-date"> "<%= comment.date %>"</span></p>
  <% if logged_in? && current_user.id == @picture.user_id && @picture.solved == nil %>
   <form action="/solved_pictures" method="post">
      <input type="hidden" name="comment_id" value="<%= comment.id %>">
      <input type="hidden" name="picture_id" value="<%= @picture.id %>">
      <button>✅</button>
    </form>

    <% end %>

  <% if Like.where(user_id: current_user.id, comment_id: comment.id ).empty? %>
    <form action="/likes" method="post">
      <input type="hidden" name="comment_id" value="<%= comment.id %>">
      <input type="hidden" name="picture_id" value="<%= @picture.id %>">
      <button>👍</button>
    </form>
  <% end %>
<% end %>

<% Comment.where(picture_id: @picture.id).select do |comment| %>
  <% if Like.where(comment_id: comment.id).empty? %>
    <p> <span class="comment-body">"<%= comment.body %>"</span> by <span class="comment-username"> "<%= comment.user.username %>"</span> Date Posted: <span class="comment-date"> "<%= comment.date %>"</span></p>

    <form action="/likes" method="post">
      <input type="hidden" name="comment_id" value="<%= comment.id %>">
      <input type="hidden" name="picture_id" value="<%= @picture.id %>">
      <button>👍</button>
    </form>
  <% end %>
<% end %>

<% if logged_in? %>
<form action="/comments" method="post">
  <input type="hidden" name="picture_id" value="<%= @picture.id %>">
  <textarea name="body"></textarea>
  <button>Answer</button>
</form>

<% end %>

